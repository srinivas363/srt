{
	"Resources": {
		"myvpc":{
		"Type":"AWS::EC2::VPC",
		"Properties":{
			"CidrBlock":"10.0.0.0/24",
			"Tags":[
			{"Key":"Name",
			"Value":"App1-Vpc"
			},
			{"Key":"Env",
			"Value":"Dev"
			}
					]
					}
				},
		"sn1":{
		"Type":"AWS::EC2::Subnet",
		"Properties":{
			"CidrBlock":"10.0.0.0/25",
			"VpcId":{"Ref":"myvpc"},
			"AvailabilityZone":"ap-southeast-1a"
						}
				},
		"sn2":{
		"Type":"AWS::EC2::Subnet",
		"Properties":{
			"CidrBlock":"10.0.0.128/25",
			"VpcId":{"Ref":"myvpc"},
			"AvailabilityZone":"ap-southeast-1b"
						}
				},
		"RT1":{
		"Type" : "AWS::EC2::RouteTable",
		"Properties" : {
		"VpcId" :{"Ref":"myvpc"}
						}
				},
		"IG":{
		"Type" : "AWS::EC2::InternetGateway",
		"Properties" : {
		"Tags" : [
		{"Key":"Name",
		"Value":"IGW"}]
						}
	 		},
		"VPCIGattach":{
		 "Type" : "AWS::EC2::VPCGatewayAttachment",
		 "Properties" : {
		 "InternetGatewayId":{"Ref":"IG"},
		 "VpcId": {"Ref":"myvpc"}
						}
					},
		"RTS":{
		 "Type" : "AWS::EC2::Route",
		 "Properties" : {
		 "DestinationCidrBlock" :"0.0.0.0/0",
		 "GatewayId" :{"Ref":"IG"} ,
		 "RouteTableId" : {"Ref":"RT1"}
						 }
						},
	
		"SRTass":{
			 "Type" : "AWS::EC2::SubnetRouteTableAssociation",
			 "Properties" : {
			 "RouteTableId" : {"Ref":"RT1"},
			 "SubnetId":{"Ref":"sn1"}
						 }
						},
		"SG1":
						{
		 "Type" : "AWS::EC2::SecurityGroup",
		 "Properties" :
		 {
		 "GroupDescription" :"Allow http to client host",
		 "VpcId": {"Ref":"myvpc"},
		 "Tags":[
			{"Key":"Name",
			"Value":"SG1"
			}
					],
		 "SecurityGroupEgress" : [
			 {
			 "IpProtocol" : "tcp",
			 "FromPort" : "80",
			 "ToPort" : "80",
			 "CidrIp" : "0.0.0.0/0"
			 } ],
		 "SecurityGroupIngress" : [ 
			 {
			 "IpProtocol" : "tcp",
			 "FromPort" : "80",
			 "ToPort" : "80",
			 "CidrIp" : "0.0.0.0/0"
			 }]
		}
						},
		"SG2":
						{
		 "Type" : "AWS::EC2::SecurityGroup",
		 "Properties" :
		 {
		 "GroupDescription" :"Allow http to client host",
		 "VpcId": {"Ref":"myvpc"},
		 "Tags":[
			{"Key":"Name",
			"Value":"SG2"
			}
					],
		 "SecurityGroupEgress" : [
			 {
			 "IpProtocol" : "tcp",
			 "FromPort" : "22",
			 "ToPort" : "22",
			 "CidrIp" : "10.0.0.0/24"
			 } ],
		 "SecurityGroupIngress" : [ 
			 {
			 "IpProtocol" : "tcp",
			 "FromPort" : "22",
			 "ToPort" : "22",
			 "CidrIp" : "10.0.0.0/24"
			 }]
		}
						},
		"Ins1":{
		"Type":"AWS::EC2::Instance",
		"Properties":{
			"AvailabilityZone":"ap-southeast-1a",
			"InstanceType":"t2.micro",
			"SubnetId":{"Ref":"sn1"},
			"ImageId":"ami-04d9e855d716f9c99",
			"SecurityGroupIds" :[{"Ref":"SG1"}]
				}		
	}}
}